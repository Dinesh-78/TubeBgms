{"ast":null,"code":"var _jsxFileName = \"E:\\\\tubgms\\\\musicbase\\\\src\\\\pages\\\\admin.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Admin = () => {\n  _s();\n  const [file, setFile] = useState(null);\n  const [fileName, setFileName] = useState('');\n  const [tags, setTags] = useState('');\n  const [progress, setProgress] = useState({\n    started: false,\n    pc: 0\n  });\n  const [msg, setMsg] = useState('');\n  const [bgmname, setbgmname] = useState('');\n  function handleUpload() {\n    if (!file) {\n      console.log(\"No file selected\");\n      return;\n    }\n    const formData = new FormData();\n    formData.append('audio', file);\n    formData.append('filename', fileName);\n    formData.append('songname', bgmname);\n    formData.append('tags', tags);\n    setMsg(\"Uploading ...\");\n    setProgress(prevState => ({\n      ...prevState,\n      started: true\n    }));\n    axios.post('http://localhost:5000/upload', formData, {\n      onUploadProgress: progressEvent => {\n        const percentCompleted = Math.round(progressEvent.loaded * 100 / progressEvent.total);\n        setProgress(prevState => ({\n          ...prevState,\n          pc: percentCompleted\n        }));\n      },\n      headers: {\n        'Content-Type': 'multipart/form-data'\n      }\n    }).then(res => {\n      setMsg(\"Upload Successful\");\n      console.log(res.data);\n    }).catch(err => {\n      setMsg(\"Upload Failed\");\n      console.error(err);\n    });\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"upload\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Upload Music File\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      onChange: e => setFile(e.target.files[0]),\n      type: \"file\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      value: bgmname,\n      onChange: e => setbgmname(e.target.value),\n      placeholder: \"Enter file name\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      value: tags,\n      onChange: e => setTags(e.target.value),\n      placeholder: \"Enter tags separated by #\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: handleUpload,\n      children: \"Upload\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 13\n    }, this), progress.started && /*#__PURE__*/_jsxDEV(\"progress\", {\n      max: \"100\",\n      value: progress.pc\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 34\n    }, this), msg && /*#__PURE__*/_jsxDEV(\"span\", {\n      children: msg\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 21\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 46,\n    columnNumber: 9\n  }, this);\n};\n_s(Admin, \"fDXivj3S3H/ct2w3dRcS6lINPeE=\");\n_c = Admin;\nexport default Admin;\nvar _c;\n$RefreshReg$(_c, \"Admin\");","map":{"version":3,"names":["React","useState","axios","jsxDEV","_jsxDEV","Admin","_s","file","setFile","fileName","setFileName","tags","setTags","progress","setProgress","started","pc","msg","setMsg","bgmname","setbgmname","handleUpload","console","log","formData","FormData","append","prevState","post","onUploadProgress","progressEvent","percentCompleted","Math","round","loaded","total","headers","then","res","data","catch","err","error","className","children","_jsxFileName","lineNumber","columnNumber","onChange","e","target","files","type","value","placeholder","onClick","max","_c","$RefreshReg$"],"sources":["E:/tubgms/musicbase/src/pages/admin.jsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport axios from 'axios';\r\n\r\nconst Admin = () => {\r\n    const [file, setFile] = useState(null);\r\n    const [fileName, setFileName] = useState('');\r\n    const [tags, setTags] = useState('');\r\n    const [progress, setProgress] = useState({ started: false, pc: 0 });\r\n    const [msg, setMsg] = useState('');\r\n    const  [bgmname, setbgmname] = useState('');\r\n    function handleUpload() {\r\n        if (!file) {\r\n            console.log(\"No file selected\");\r\n            return;\r\n        }\r\n\r\n        const formData = new FormData();\r\n        formData.append('audio', file);\r\n        formData.append('filename', fileName);\r\n        formData.append('songname',bgmname);\r\n        formData.append('tags', tags);\r\n\r\n        setMsg(\"Uploading ...\");\r\n        setProgress(prevState => ({ ...prevState, started: true }));\r\n\r\n        axios.post('http://localhost:5000/upload', formData, {\r\n            onUploadProgress: (progressEvent) => {\r\n                const percentCompleted = Math.round((progressEvent.loaded * 100) / progressEvent.total);\r\n                setProgress(prevState => ({ ...prevState, pc: percentCompleted }));\r\n            },\r\n            headers: {\r\n                'Content-Type': 'multipart/form-data',\r\n            }\r\n        })\r\n        .then(res => {\r\n            setMsg(\"Upload Successful\");\r\n            console.log(res.data);\r\n        })\r\n        .catch(err => {\r\n            setMsg(\"Upload Failed\");\r\n            console.error(err);\r\n        });\r\n    }\r\n\r\n    return (\r\n        <div className='upload'>\r\n            <h1>Upload Music File</h1>\r\n            <input onChange={(e) => setFile(e.target.files[0])} type=\"file\" />\r\n            <input value={bgmname} onChange={(e) => setbgmname(e.target.value)} placeholder=\"Enter file name\" />\r\n            <input value={tags} onChange={(e) => setTags(e.target.value)} placeholder=\"Enter tags separated by #\" />\r\n            <button onClick={handleUpload}>Upload</button>\r\n            {progress.started && <progress max=\"100\" value={progress.pc}></progress>}\r\n            {msg && <span>{msg}</span>}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Admin;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}